{% extends 'main.twig' %}
 {% block contenthead %}

     <div class="kt-subheader   kt-grid__item" id="kt_subheader">
         <div class="kt-subheader__main">
             <h3 class="kt-subheader__title">
                 Worker Groups </h3>
             <span class="kt-subheader__separator kt-hidden"></span>
             <div class="kt-subheader__breadcrumbs">
                 <a href="#" class="kt-subheader__breadcrumbs-home"><i class="flaticon2-shelter"></i></a>
                 <span class="kt-subheader__breadcrumbs-separator"></span>
                 <a href="" class="kt-subheader__breadcrumbs-link">
                     Add Worker Group </a>

             </div>
         </div>

     </div>
 {% endblock %}
{% block body %}
    <div class="row">
        <div class="col-lg-12">
            <!--begin::Portlet-->
            <div class="kt-portlet">
                <div class="kt-portlet__head">
                    <div class="kt-portlet__head-label">
                        <h3 class="kt-portlet__head-title">
                            Add Group
                        </h3>
                    </div>
                </div>

                <form class="kt-form">
                    <div class="kt-portlet__body">
                        <div class="kt-section kt-section--first">
                <div class="form-group">
                            <label>Group Name:</label>

                                <input type="text" id="group_name" name="group_name" class="form-control col-md-7 col-xs-12"/>

                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="group_description">Group Description:</label>

                                <textarea  id="group_description" name="group_description" class="form-control col-md-7 col-xs-12"></textarea>

                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="status">Status:</label>

                                <select  id="status" name="status" required="required" class="form-control col-md-7 col-xs-12">
                                    <option value="Active">Active</option>
                                    <option value="Inactive">Inactive</option>
                                </select>

                        </div>

                        </div>

                        <div class="kt-portlet__foot">
                            <div class="kt-form__actions">
                                <a href="{{ path_for('merchant.manage-groups') }}" type="button" id="btn_cancel" class="btn btn-primary">Cancel</a>
                                <button type="button" id="btn_save" class="btn btn-success">Add Worker Group</button>
                            </div>
                        </div>
                        </div>
                    </form>
            </div>


            <!--end::Portlet-->
        </div>

    </div>
    <script type="text/javascript">

        $(document).ready(function () {

            //Post Product

            $('#btn_save').click(function () {

                var group_name = $('#group_name').val();
                var group_description = $('#group_description').val();
                var status = $('#status').val();


                if (group_name == '') {
                    toastr.error("Error Occured!!!", 'You must select a group name');
                    return;
                }

                if (group_description == '') {
                    toastr.error("Error Occured!!!", 'Enter A Group Description');
                    return;
                }

                if (status == '') {
                    toastr.error("Error Occured!!!", 'Set the group status');
                    return;
                }


                $.ajax({
                    type: 'POST',
                    url: '{{ path_for('merchant.save-group') }}',
                    data: {
                        group_name: group_name,
                        group_description: group_description,
                        status: status,
                    }
                })
                    .success(function (data) {
                        window.setTimeout(function(){
                            window.location.href='/worker/manage-groups';
                        }, 3000);
                    })
                    .fail(function (jqXHR, textStatus, errorThrown) {
                        alert(JSON.stringify(errorThrown));
                    });
            });
        });
    </script>
{% endblock %}
